---
title: æç¤ºè¯æ¨¡æ¿
description: æç¤ºè¯æ¨¡æ¿
pubDate: 2025-09-28
toc: true
ogImage: true
category: Langchain
---

åœ¨ä½¿ç”¨ LangChain æ„å»ºå¤§æ¨¡å‹åº”ç”¨æ—¶ï¼Œ**æç¤ºè¯ï¼ˆPromptï¼‰è®¾è®¡æ˜¯ç¬¬ä¸€æ­¥**ã€‚ä½†ç›´æ¥å†™æ­»å­—ç¬¦ä¸²å®¹æ˜“å‡ºé”™ã€å¤ç”¨æ€§å·®ï¼Œä¹Ÿä¸åˆ©äºç»´æŠ¤ã€‚è¿™æ—¶å€™å°±è¯¥ç”¨ä¸Š LangChain æä¾›çš„ **Prompt Template** â€”â€” ä¸€ä¸ªä¸“ä¸ºè¯­è¨€æ¨¡å‹è®¾è®¡çš„æç¤ºè¯æ¨¡æ¿å·¥å…·ã€‚

## å¿«é€Ÿä¸Šæ‰‹

æ— å˜é‡ï¼Œçº¯å­—ç¬¦ä¸²æ¨¡æ¿

```js
import { PromptTemplate } from '@langchain/core/prompts'

// åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„æç¤ºæ¨¡æ¿
const prompt = new PromptTemplate({
  inputVariables: [], // å˜é‡åˆ—è¡¨
  template: 'Hello, AI!', // æ¨¡æ¿
})

// ä½¿ç”¨ format æ–¹æ³•æ ¼å¼åŒ–æ¨¡æ¿ï¼ˆæ­¤å¤„æ— å˜é‡ï¼‰
const result = await prompt.format()

console.log(result) // Hello, AI!
```

æœ‰å˜é‡ï¼ŒåµŒå…¥åˆ°å­—ç¬¦ä¸²æ¨¡æ¿

```js
import { PromptTemplate } from '@langchain/core/prompts'

// åˆ›å»ºä¸€ä¸ªåŒ…å«å˜é‡çš„æç¤ºæ¨¡æ¿
const prompt = new PromptTemplate({
  inputVariables: ['user'], // åœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢ï¼Œå£°æ˜æœ‰å“ªäº›å˜é‡
  template: 'Hi, {user}!', // ä½¿ç”¨äº† {} ä½œä¸ºå˜é‡åçš„å®¹å™¨
})

// ä½¿ç”¨ format æ–¹æ³•æ›¿æ¢å˜é‡
// éœ€è¦æä¾›å˜é‡çš„å€¼
const output = await prompt.format({
  user: 'Alex',
})

console.log(output) // Hi, Alex!
```

åµŒå…¥å¤šä¸ªå˜é‡ï¼š

```js
import { PromptTemplate } from '@langchain/core/prompts'

// å®šä¹‰ä¸€ä¸ªå¤šå˜é‡æ¨¡æ¿
const prompt = new PromptTemplate({
  inputVariables: ['period', 'user'], // ä¼šç”¨åˆ°2ä¸ªå˜é‡
  template: 'Good {period}, {user}!',
})

// æä¾›å¯¹åº”çš„å˜é‡å€¼è¿›è¡Œæ ¼å¼åŒ–
const result = await prompt.format({
  period: 'evening',
  user: 'Lynn',
})

console.log(result) // Good evening, Lynn!
```

å¦‚æœä½ æƒ³åœ¨æœ€ç»ˆç»“æœä¸­ä¿ç•™ `{}` å­—ç¬¦ï¼Œæ¯”å¦‚è¾“å‡º `{debug}` æˆ– `{info}`ï¼Œå¯ä»¥ä½¿ç”¨ `{{}}` è¿›è¡Œè½¬ä¹‰ï¼š

```js
import { PromptTemplate } from '@langchain/core/prompts'

// åˆ›å»ºä¸€ä¸ªåŒ…å«å˜é‡çš„æç¤ºæ¨¡æ¿
const prompt = new PromptTemplate({
  inputVariables: ['info'],
  template: '{{debug}}: å½“å‰è°ƒè¯•çš„ä¿¡æ¯ä¸º{info}',
})

// ä½¿ç”¨ format æ–¹æ³•æ›¿æ¢å˜é‡
// éœ€è¦æä¾›å˜é‡çš„å€¼
const output = await prompt.format({
  info: 'æ—¥å¿—å·²ç»ä¸Šä¼ è‡³æ•°æ®åº“',
})

console.log(output)
```

è¿™æ ·å°±ä¸ä¼šè¢«å½“ä½œå˜é‡è§£æï¼Œè€Œæ˜¯åŸæ ·è¾“å‡º `{debug}`ã€‚

## é™æ€æ–¹æ³•

`PromptTemplate.fromTemplate()` ç”¨æ¥å¿«é€Ÿåˆ›å»ºæ¨¡æ¿ï¼š

```js
import { PromptTemplate } from '@langchain/core/prompts'

const pt = PromptTemplate.fromTemplate(
  'ä½ æ˜¯ä¸€ä½ç²¾é€š{subject}çš„ä¸“å®¶ï¼Œè¯·ç”¨{language}æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜'
)
console.log(pt.inputVariables) // [ 'subject', 'language' ]

const result = await pt.format({
  subject: 'ç”Ÿç‰©å­¦',
  language: 'ä¸­æ–‡',
})
console.log(result) // ä½ æ˜¯ä¸€ä½ç²¾é€šç”Ÿç‰©å­¦çš„ä¸“å®¶ï¼Œè¯·ç”¨ä¸­æ–‡æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜
```

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ— éœ€æ‰‹åŠ¨å£°æ˜ `inputVariables`ï¼ŒLangChain ä¼šè‡ªåŠ¨ä»æ¨¡æ¿å­—ç¬¦ä¸²ä¸­è¯†åˆ« `{}` åŒ…è£¹çš„å˜é‡ï¼Œæ˜¯æ„å»ºå¿«é€Ÿæ¨¡æ¿çš„ç†æƒ³é€‰æ‹©ã€‚

```js
prompt.inputVariables // ["subject", "language"]
```

## éƒ¨åˆ†å¡«å……

æˆ‘ä»¬æœ‰æ—¶å¹¶ä¸ä¼šä¸€æ¬¡æ€§æ‹¿åˆ°æ‰€æœ‰çš„å˜é‡æ•°æ®ã€‚è¿™æ—¶å°±å¯ä»¥**å…ˆä¼ å…¥ä¸€éƒ¨åˆ†å˜é‡**ï¼Œ**ç”Ÿæˆä¸€ä¸ªâ€œéƒ¨åˆ†å¡«å……â€çš„æ¨¡æ¿**ï¼Œåç»­å†ç»§ç»­è¡¥å…¨ â€”â€” è¿™ä¸å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ€è·¯éå¸¸ç›¸ä¼¼ã€‚

```js
import { PromptTemplate } from '@langchain/core/prompts'

const pt = PromptTemplate.fromTemplate(
  'ä½ æ˜¯ä¸€ä½ç²¾é€š{subject}çš„ä¸“å®¶ï¼Œè¯·ç”¨{language}æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼š{info}'
)
const pt2 = await pt.partial({
  subject: 'ç”Ÿç‰©å­¦',
})
const pt3 = await pt2.partial({
  language: 'ä¸­æ–‡',
})
const result = await pt3.format({
  info: 'å¤§è±¡çš„é¼»å­ä¸ºä»€ä¹ˆé‚£ä¹ˆé•¿',
})
console.log(result)
```

## åŠ¨æ€ç”Ÿæˆå˜é‡å€¼

åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›**åœ¨æ¨¡æ¿æ ¼å¼åŒ–æ—¶åŠ¨æ€ç”Ÿæˆå˜é‡å€¼**ï¼Œæ¯”å¦‚å½“å‰æ—¶é—´ã€éšæœºæ•°æˆ–ç”¨æˆ·ä¸Šä¸‹æ–‡ã€‚

æ­¤æ—¶å¯ä»¥åœ¨ `partial` æ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ª**å‡½æ•°**ï¼Œè€Œä¸æ˜¯å›ºå®šçš„å€¼ã€‚

ä¹‹ååœ¨è°ƒç”¨ `.format()` æ—¶ï¼Œå‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œç”Ÿæˆå®é™…å˜é‡å†…å®¹ã€‚

```js
import { PromptTemplate } from '@langchain/core/prompts'

// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè·å–å½“å‰çš„æ—¥æœŸ
const getToday = () => new Date().toLocaleDateString()

const pt = PromptTemplate.fromTemplate('ä»Šå¤©æ˜¯{date}ï¼Œä»Šå¤©çš„æ´»åŠ¨æ˜¯ï¼š{event}')

const pt2 = await pt.partial({
  date: getToday,
})

const result = await pt2.format({
  event: 'å‡ºå»éƒŠæ¸¸',
})
console.log(result)
```

å¦å¤–ä¸€ä¸ªç¤ºä¾‹ï¼š

```js
import { PromptTemplate } from '@langchain/core/prompts'

// è·å–å½“å‰æ—¥æœŸ
const getDate = () => new Date().toLocaleDateString()

function createGreeting(period) {
  const date = getDate() // è·å–äº†å½“å‰çš„æ—¥æœŸ
  if (period === 'æ—©ä¸Š') return `${date}ï¼Œæ—©ä¸Šå¥½`
  if (period === 'ä¸‹åˆ') return `${date}ï¼Œä¸‹åˆå¥½`
  if (period === 'æ™šä¸Š') return `${date}ï¼Œæ™šä¸Šå¥½`
  return `${date}ï¼Œä½ å¥½`
}

// å®šä¹‰æç¤ºæ¨¡æ¿
const prompt = new PromptTemplate({
  template: '{greeting}ï¼æ¬¢è¿å›æ¥ã€‚',
  inputVariables: ['greeting'],
})

// è®¾ç½®å½“å‰æ—¶é—´æ®µ
const timePeriod = 'ä¸‹åˆ'

// ä¼ å…¥å‡½æ•°ï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²
const partialPrompt = await prompt.partial({
  greeting: createGreeting(timePeriod),
})

const result = await partialPrompt.format()

console.log(result) // 8/6/2025ï¼Œä¸‹åˆå¥½ï¼æ¬¢è¿å›æ¥ã€‚
```

## æ„å»ºå°‘æ ·æœ¬æç¤ºè¯

ğŸ¤”ä»€ä¹ˆæ˜¯å°‘æ ·æœ¬æç¤ºè¯ï¼Ÿ

å°‘æ ·æœ¬å­¦ä¹ ï¼ˆfew-shot learningï¼‰ï¼Œä¹Ÿç§°ä¹‹ä¸ºå°‘æ ·æœ¬æç¤ºï¼Œè¿™æ˜¯ä¸€ç§èŒƒå¼ï¼Œåœ¨è¿™ç§èŒƒå¼ä¸­ï¼Œæ¨¡å‹é€šè¿‡æç¤ºè¯è·å¾—ä½ å¸Œæœ›æ¨¡å‹æ‰§è¡Œçš„ä»»åŠ¡ç¤ºä¾‹ã€‚

ç¤ºä¾‹ï¼š

```
ä¾‹å­ï¼š
è¯„è®ºï¼šè¿™ä¸ªäº§å“çœŸä¸é”™ï¼Œç”¨å¾—å¾ˆé¡ºæ‰‹ï¼ â†’ æƒ…æ„Ÿï¼šæ­£é¢
è¯„è®ºï¼šå®Œå…¨å¤±æœ›ï¼Œè´¨é‡å¤ªå·®äº†ã€‚ â†’ æƒ…æ„Ÿï¼šè´Ÿé¢
è¯„è®ºï¼šå¿«é€’åˆ°äº†ã€‚ â†’ æƒ…æ„Ÿï¼šä¸­æ€§

è¯„è®ºï¼šå¤–è§‚è¿˜è¡Œï¼Œæ€§èƒ½ä¸€èˆ¬èˆ¬ã€‚ â†’ æƒ…æ„Ÿï¼š
```

```
ä¾‹å­ï¼š
å¥å­ï¼šé©¬äº‘æ˜¯é˜¿é‡Œå·´å·´çš„åˆ›å§‹äººã€‚
å®ä½“ï¼š[é©¬äº‘: äººå], [é˜¿é‡Œå·´å·´: ç»„ç»‡]

å¥å­ï¼šä¹”å¸ƒæ–¯å‡ºç”Ÿåœ¨æ—§é‡‘å±±ã€‚
å®ä½“ï¼š[ä¹”å¸ƒæ–¯: äººå], [æ—§é‡‘å±±: åœ°ç‚¹]

å¥å­ï¼šæé›·æ˜å¤©å»åŒ—äº¬å‡ºå·®ã€‚
å®ä½“ï¼š
```

**`PromptTemplate.fromExamples()` å·²ç»ä¸æ¨èä½¿ç”¨**ï¼Œåœ¨ `@langchain/core@0.3.x` ç‰ˆæœ¬ä¸­å·²ç»é€æ­¥è½¬å‘ä½¿ç”¨ `FewShotPromptTemplate`

```js
import { PromptTemplate, FewShotPromptTemplate } from '@langchain/core/prompts'

const examples = [
  { input: 'apple', output: 'è‹¹æœ' },
  { input: 'banana', output: 'é¦™è•‰' },
  { input: 'orange', output: 'æ©™å­' },
]

// æ¯ä¸ªç¤ºä¾‹çš„æ¨¡æ¿
const examplePt = PromptTemplate.fromTemplate(
  'è¾“å…¥: {input} --- è¾“å‡º: {output}'
)

const pt = new FewShotPromptTemplate({
  examples, // ç¤ºä¾‹çš„æ•°ç»„
  examplePrompt: examplePt, // ç¤ºä¾‹çš„æ¨¡æ¿
  suffix: 'è¾“å…¥: {fruit} --- è¾“å‡º: ',
  inputVariables: ['fruit'],
})

const result = await pt.format({
  fruit: 'grape',
})
console.log(result)
```

**è¯¾å ‚ç»ƒä¹ **

ç”Ÿæˆæƒ…æ„Ÿåé¦ˆçš„ few-shot æç¤ºè¯

å‚è€ƒç­”æ¡ˆ

```js
import { PromptTemplate, FewShotPromptTemplate } from '@langchain/core/prompts'

const examples = [
  { comment: 'è¿™ä¸ªäº§å“çœŸä¸é”™ï¼Œç”¨å¾—å¾ˆé¡ºæ‰‹ï¼', sentiment: 'æ­£é¢' },
  { comment: 'å®Œå…¨å¤±æœ›ï¼Œè´¨é‡å¤ªå·®äº†ã€‚', sentiment: 'è´Ÿé¢' },
  { comment: 'å¿«é€’åˆ°äº†ã€‚', sentiment: 'ä¸­æ€§' },
]

// æ¯ä¸ªç¤ºä¾‹çš„æ¨¡æ¿
const examplePt = PromptTemplate.fromTemplate(
  'è¯„è®ºï¼š{comment} â†’ æƒ…æ„Ÿï¼š{sentiment}'
)

const pt = new FewShotPromptTemplate({
  examples, // ç¤ºä¾‹çš„æ•°ç»„
  examplePrompt: examplePt, // ç¤ºä¾‹çš„æ¨¡æ¿
  suffix: 'è¯„è®ºï¼š{comment} â†’ æƒ…æ„Ÿï¼š ',
  inputVariables: ['comment'],
})

const result = await pt.format({
  comment: 'å¤–è§‚è¿˜è¡Œï¼Œæ€§èƒ½ä¸€èˆ¬èˆ¬',
})
console.log(result)
```

---
