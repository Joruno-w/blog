---
title: å¤–æ¥DeepSeek
description: å¤–æ¥DeepSeek
pubDate: 2025-10-09
toc: true
ogImage: true
category: LLM
---

Function Calling

[deepseek å¼€å‘å¹³å°](https://platform.deepseek.com/) ç”³è¯·ä¸€ä¸ª api key

ç”³è¯· api key çš„æ—¶å€™ï¼Œåªæœ‰åœ¨åˆ›å»ºçš„æ—¶å€™æ‰èƒ½çœ‹åˆ°å®Œæ•´çš„ keyï¼Œæ‰€ä»¥åˆ›å»ºçš„æ—¶å€™ä¸€å®šè¦å¦¥å–„ä¿å­˜

æœ‰äº† api key åï¼Œæˆ‘ä»¬å°±å¯ä»¥å’Œ deepseek å¤§æ¨¡å‹è¿›è¡Œä¸€ä¸ªäº¤äº’ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ `curl` å‘½ä»¤å‘é€ä¸€ä¸ª **POST è¯·æ±‚** åˆ° DeepSeek çš„æ¥å£ `/chat/completions`

```bash
curl https://api.deepseek.com/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  -d '{
        "model": "deepseek-chat",
        "messages": [
          {"role": "user", "content": "ä½ æ˜¯è°ï¼Ÿ"}
        ],
        "stream": false
      }'
```

```json
- -H "Content-Type: application/json" \
  - `-H` æŒ‡å®šä¸€ä¸ª HTTP Headerã€‚
  - `Content-Type: application/json` å‘Šè¯‰æœåŠ¡å™¨ï¼šè¯·æ±‚ä½“æ˜¯ JSON æ ¼å¼çš„æ•°æ®ã€‚
- -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  - è¿™æ˜¯ **è®¤è¯ä¿¡æ¯**ã€‚
  - ä½¿ç”¨ Bearer Token æ–¹å¼æˆæƒï¼Œ`sk-xxx` æ˜¯ API å¯†é’¥ã€‚
- -d '{ "model": "deepseek-chat", "messages": [{"role": "user", "content": "ä½ æ˜¯è°ï¼Ÿ"}],"stream": true}'
  - è¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰ï¼Œä½¿ç”¨ `-d` ä¼ é€’ JSON æ•°æ®ã€‚
  - "model": "deepseek-chat"ï¼šæŒ‡å®šä½¿ç”¨çš„æ¨¡å‹åã€‚
  - "messages": [...]ï¼šæ¶ˆæ¯å¯¹è±¡
  - "content": "ä½ æ˜¯è°ï¼Ÿ"ï¼šç”¨æˆ·å‘å‡ºçš„å…·ä½“é—®é¢˜æˆ–å¯¹è¯å†…å®¹ã€‚
```

å¤§æ¨¡å‹è¿”å›å†…å®¹ï¼š

```json
{
  "id": "81dddbb5-c01b-476b-a5d5-c5ac87e31b92", // æ¯æ¬¡è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUUIDï¼‰
  "object": "chat.completion", // è¿”å›å¯¹è±¡ç±»å‹ï¼Œè¿™é‡Œè¡¨ç¤ºæ˜¯èŠå¤©è¡¥å…¨ç»“æœ
  "created": 1751766353, // å“åº”ç”Ÿæˆæ—¶é—´ï¼ˆUnix æ—¶é—´æˆ³ï¼Œå•ä½ç§’ï¼‰
  "model": "deepseek-chat", // ä½¿ç”¨çš„æ¨¡å‹åç§°

  "choices": [
    // æ¨¡å‹è¿”å›çš„ä¸€ä¸ªæˆ–å¤šä¸ªå›ç­”ï¼ˆé€šå¸¸åªä¼šæœ‰ä¸€ä¸ªï¼‰
    {
      "index": 0, // å½“å‰å›ç­”çš„ç´¢å¼•ï¼ˆä» 0 å¼€å§‹ï¼‰
      "message": {
        "role": "assistant", // æ¶ˆæ¯è§’è‰²ï¼Œè¿™é‡Œæ˜¯ AI åŠ©æ‰‹
        "content": "æˆ‘æ˜¯ä¸€ä¸ªæ™ºèƒ½AIåŠ©æ‰‹ï¼Œéšæ—¶ä¸ºä½ æä¾›å¸®åŠ©å’Œè§£ç­”é—®é¢˜ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ" // æ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬å†…å®¹
      },
      "logprobs": null, // token æ¦‚ç‡ä¿¡æ¯ï¼ˆå¦‚æœªå¯ç”¨ logprobs åˆ™ä¸º nullï¼‰
      "finish_reason": "stop" // ç»“æŸåŸå› ï¼šstop è¡¨ç¤ºæ­£å¸¸ç”Ÿæˆç»“æŸ
    }
  ],

  "usage": {
    // æœ¬æ¬¡è¯·æ±‚çš„ Token ä½¿ç”¨æƒ…å†µ
    "prompt_tokens": 25, // ç”¨æˆ·è¾“å…¥å ç”¨çš„ token æ•°
    "completion_tokens": 19, // æ¨¡å‹å›å¤å ç”¨çš„ token æ•°
    "total_tokens": 44, // æ€»å…±ä½¿ç”¨çš„ token æ•°
    "prompt_tokens_details": {
      "cached_tokens": 0 // å‘½ä¸­ç¼“å­˜çš„ token æ•°ï¼ˆå¦‚å¯ç”¨ prompt ç¼“å­˜æœºåˆ¶ï¼‰
    },
    "prompt_cache_hit_tokens": 0, // ç¼“å­˜å‘½ä¸­ token æ•°ï¼ˆæœ¬æ¬¡ä¸º 0ï¼Œè¡¨ç¤ºæœªå‘½ä¸­ï¼‰
    "prompt_cache_miss_tokens": 25 // ç¼“å­˜æœªå‘½ä¸­ token æ•°ï¼ˆæœ¬æ¬¡ä¸º 25ï¼Œå³å…¨éƒ¨æœªå‘½ä¸­ï¼‰
  },

  "system_fingerprint": "fp_8802369eaa_prod0623_fp8_kvcache" // ç³»ç»Ÿ/æ¨¡å‹è¿è¡Œç¯å¢ƒæŒ‡çº¹ï¼Œç”¨äºè¿½è¸ªæ¨¡å‹ç‰ˆæœ¬ç­‰
}
```

å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¼€å¯æµå¼å›å¤ï¼š

```bash
curl https://api.deepseek.com/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  -d '{
        "model": "deepseek-chat",
        "messages": [
          {"role": "user", "content": "ä½ æ˜¯è°ï¼Ÿ"}
        ],
        "stream": true
      }'
```

å¾—åˆ°çš„å›å¤å¦‚ä¸‹ï¼š

```
data: {"id":"83e0da03-9eb4-4883-887c-14847e88a441","object":"chat.completion.chunk","created":1751767365,"model":"deepseek-chat","system_fingerprint":"fp_8802369eaa_prod0623_fp8_kvcache","choices":[{"index":0,"delta":{"content":"æˆ‘æ˜¯ä¸€ä¸ª"},"logprobs":null,"finish_reason":null}]}


...


data: {"id":"83e0da03-9eb4-4883-887c-14847e88a441","object":"chat.completion.chunk","created":1751767365,"model":"deepseek-chat","system_fingerprint":"fp_8802369eaa_prod0623_fp8_kvcache","choices":[{"index":0,"delta":{"content":"å—"},"logprobs":null,"finish_reason":null}]}


data: {"id":"83e0da03-9eb4-4883-887c-14847e88a441","object":"chat.completion.chunk","created":1751767365,"model":"deepseek-chat","system_fingerprint":"fp_8802369eaa_prod0623_fp8_kvcache","choices":[{"index":0,"delta":{"content":""},"logprobs":null,"finish_reason":"stop"}],"usage":{"prompt_tokens":25,"completion_tokens":19,"total_tokens":44,"prompt_tokens_details":{"cached_tokens":0},"prompt_cache_hit_tokens":0,"prompt_cache_miss_tokens":25}}

data: [DONE]
```

ç›®å‰çš„å¤§æ¨¡å‹ä»…ä»…æ˜¯ç®€å•çš„ **è¾“å…¥** å’Œ **è¾“å‡º**ï¼Œç”šè‡³è¿ä¸Šä¸‹æ–‡éƒ½ä¸æ”¯æŒã€‚

ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š

```bash
curl https://api.deepseek.com/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  -d '{
        "model": "deepseek-chat",
        "messages": [
          {"role": "user", "content": "ä½ æ˜¯è°ï¼Ÿ"}
        ],
        "stream": false
      }'
```

```bash
curl https://api.deepseek.com/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  -d '{
        "model": "deepseek-chat",
        "messages": [
          {"role": "user", "content": "æˆ‘åˆšæ‰è¯´çš„å•¥ï¼Ÿ"}
        ],
        "stream": false
      }'
```

æ¨¡å‹ç»™å‡ºçš„å›å¤ï¼š

```
ä½ ä¹‹å‰æ²¡æœ‰å‘é€è¿‡ä»»ä½•å†…å®¹å“¦ï½å¯èƒ½æ˜¯æ¶ˆæ¯æ²¡å‘é€æˆåŠŸï¼Ÿä½ å¯ä»¥é‡æ–°å‘Šè¯‰æˆ‘ä½ çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œæˆ‘ä¼šå°½åŠ›å¸®ä½ è§£ç­”ï¼ ğŸ˜Š
```

ğŸ™‹é‚£æœ‰æ²¡æœ‰åŠæ³•è®©æ¨¡å‹æ”¯æŒä¸Šä¸‹æ–‡å‘¢ï¼Ÿ

å…¶å®éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†ä¹‹å‰çš„ä¼šè¯ï¼ŒåŠ å…¥åˆ° messges æ•°ç»„é‡Œé¢å°±è¡Œäº†ï¼Œå¦‚ä¸‹ï¼š

```bash
curl https://api.deepseek.com/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer sk-f5f93edf175c42ee8683691f8aacfdab" \
  -d '{
        "model": "deepseek-chat",
        "messages": [
          {"role": "user", "content": "ä½ çŸ¥é“å¤§è±¡ä¹ˆï¼Ÿ"},
          {"role": "assistant", "content": "å¤§è±¡æ˜¯é™†åœ°ä¸Šä½“å‹æœ€å¤§çš„å“ºä¹³åŠ¨ç‰©ï¼Œä»¥å…¶æ™ºæ…§ã€ç¤¾ä¼šæ€§å’Œæ ‡å¿—æ€§çš„é•¿é¼»å­ï¼ˆè±¡é¼»ï¼‰è€Œé—»åã€‚å®ƒä»¬åˆ†ä¸ºéæ´²è±¡å’Œäºšæ´²è±¡ä¸¤ä¸ªä¸»è¦ç§ç±»ï¼Œå…·æœ‰é«˜åº¦å‘è¾¾çš„å®¶åº­ç»“æ„å’Œæƒ…æ„Ÿèƒ½åŠ›ã€‚"},
          {"role": "user", "content": "æˆ‘ä»¬åˆšæ‰èŠäº†å•¥ï¼Ÿ"}
        ],
        "stream": false
      }'
```

æ¨¡å‹ç»™å‡ºçš„å›å¤å¦‚ä¸‹ï¼š

```
æˆ‘ä»¬åˆšæ‰çš„å¯¹è¯éå¸¸ç®€çŸ­ï¼Œä½ é—®çš„æ˜¯å…³äºå¤§è±¡çš„åŸºæœ¬ä¿¡æ¯ã€‚å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š  \n\n1. **ä½ çš„æé—®**ï¼šä½ çŸ¥é“å¤§è±¡ä¹ˆï¼Ÿ  \n2. **æˆ‘çš„å›ç­”**ï¼šä»‹ç»äº†å¤§è±¡æ˜¯é™†åœ°ä¸Šæœ€å¤§çš„å“ºä¹³åŠ¨ç‰©ï¼Œæåˆ°å®ƒä»¬çš„æ™ºæ…§ã€ç¤¾ä¼šæ€§ã€è±¡é¼»çš„åŠŸèƒ½ï¼Œä»¥åŠéæ´²è±¡å’Œäºšæ´²è±¡çš„åŒºåˆ«ã€‚  \n\nç„¶åä½ æ¥ç€é—®åˆ°äº†**ä¹‹å‰çš„èŠå¤©å†…å®¹**ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨è¿™ä¸€è½®å¯¹è¯ã€‚  \n\nå¦‚æœéœ€è¦æ›´è¯¦ç»†çš„å¤§è±¡çŸ¥è¯†ï¼ˆæ¯”å¦‚ä¹ æ€§ã€ä¿æŠ¤ç°çŠ¶ç­‰ï¼‰ï¼Œæˆ–è€…æƒ³èŠå…¶ä»–è¯é¢˜ï¼Œå¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ï¼ ğŸ˜Š
```

æ‰€ä»¥ï¼Œå¤§æ¨¡å‹æ”¯æŒä¸Šä¸‹æ–‡çš„åŸç†éå¸¸çš„ç®€å•ï¼Œå°±æ˜¯å°†ä¹‹å‰çš„èŠå¤©è®°å½•ä¸€å¹¶ç»™å®ƒã€‚

**è¯¾å ‚ç»ƒä¹ **

é‡æ„å½“å‰ AI èŠå¤©æœºå™¨äºº

---
