---
title: 通过 React Native CLI 搭建环境
description: 通过 React Native CLI 搭建环境
pubDate: 2025-10-10
toc: true
ogImage: true
category: React Native
---

目前为止，我们都是通过 _expo_ 来快速的搭建 _RN_ 的学习开发环境，

但是正如官方文档所说，如果你是作为学习，那么可以使用 _expo_ 来快速的体验 _RN_，但是如果是要开发正式的项目，那么官方还是推荐使用 _React Native CLI_ 来搭建完整的项目，里面的各种配置也会更加完整一些。

这里，我们就来跟着官方文档的步骤，使用 _React Native CLI_ 搭建正式项目的开发环境。

本文主要包含以下内容：

- _React Native CLI_ 搭建开发环境
- 目录分析

## _React Native CLI_ 搭建开发环境

> 备注 1: 在开始之前，还是再次强调，请自行解决科学上网的问题，很多依赖都需要科学上网的环境下才能下载

> 备注 2: 如果是 _macOS_ 系统电脑，可以搭建 _iOS_ 和 _Andriod_ 的环境，但是如果 _Windows_ 系统电脑，只能搭建 _Andriod_ 的环境。

> 备注 3: 本次演示步骤示例，_Development OS_ 为 _macOS_，_target_ 为 _Andriod_

接下来，我们就根据官方的步骤，一步一步来操作。

![image-20220720105820154](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025820.png)

首先整体的依赖有：

- _Node_
- _Watchman_
- _React Native command line interface_
- _JDK_
- _Android Studio_

![image-20220720105840341](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025840.png)

_Node_ 大家已经很熟悉了，而且大家都已经安装了，官方还推荐了一个叫做 _watchman_ 的工作，根据官方的描述“_Watchman_ 是 _Facebook_ 的一个工具，用于观察文件系统的变化。强烈建议您安装它以获得更好的性能。”

这里在安装的时候，还是推荐大家使用 _Homebrew_ 来进行安装，安装过程中如果遇到 _fatal: not in a git directory_ 错误，可以参阅：*https://blog.csdn.net/Wbl752134268/article/details/125186635*

安装完毕后可以通过 _watchman -v_ 命令来查看版本，如下：

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025900.png"
  alt="image-20220720105900213"
  style="zoom:50%;"
/>

> 如果在安装 _Homebrew_ 时遇到问题，可以尝试使用国内镜像安装，命令为：
> /bin/zsh -c "$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)"

### 安装 _JDK_

搭建 _Android_ 开发环境需要 _Java_ 环境的支持，因此需要下载和安装操作系统对应的 _JDK_ 版本。

![image-20220720105931006](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025931.png)

官方推荐使用 _Homebrew_ 来进行安装，当然你也可以选择直接去 [_Java_ 的官网](https://www.oracle.com/java/technologies/downloads/)下载安装。

关于 _JDK_ 的安装，你可以在网上轻松的找到详细的说明，这里不再赘述。

> _macOS_ 安装：*https://www.jianshu.com/p/199cd1abd570*
> _Windows_ 安装：*https://www.cnblogs.com/maoning/p/10701349.html*

最后输入 _javac -version_ 能查看版本号，例如：

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-025950.png"
  alt="image-20220720105950341"
  style="zoom:50%;"
/>

### _Android_ 开发环境

如果你之前没有接触过 _Android_ 的开发环境，那么请做好心理准备，这一过程相当繁琐。

首先下载安装 [_Andriod Studio_](https://developer.android.google.cn/studio/)

![image-20220720110051649](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030051.png)

点击官网的下载，可能出现无法下载的情况，将下载地址的 _https_ 协议修改为 _http_ 即可。

安装好 _Andriod Studio_ 后，接下来需要安装 _Android SDK_，根据官网的描述，目前编译 _React Native_ 应用需要的是 _Android 11 (R)_ 版本的 _SDK_，可以在 _Android Studio_ 的 _SDK Manager_ 中选择安装各版本的 _SDK_。

![image-20220720110112615](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030113.png)

根据官网下方的描述，安装对应的 _SDK_ 工具：

![image-20220720110130176](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030130.png)

根据官网的描述，接下来我们需要安装上图中框选的组件，但是第一次是无法选择的，因为没有选择 _Android SDK_ 的 _Location_，点击右侧的 _Edit_，先安装一个默认的 _Android SDK_ 版本，目前默认的是 _Andriod API 33_，展开 _Android 11 (R)_，勾选上图中框选的组件

![image-20220720110148405](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030148.png)

点击"SDK Tools"选项卡，同样勾中右下角的"Show Package Details"。展开"Android SDK Build-Tools"选项，确保选中了 React Native 所必须的30.0.2版本。你可以同时安装多个其他版本。

![image-20220720110205934](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030206.png)

在"SDK Tools"选项卡，点击"NDK (Side by side)"，同样勾中右下角的"Show Package Details"，选择20.1.5948944版本。最后再勾选上"Android SDK Command-line Tools (latest)"。

![image-20220720110222974](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030223.png)

最后点击 _Apply_ 来下载安装这些组件。

![image-20220720110247857](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030247.png)

接下来需要配置 _ANDROID_SDK_ROOT_ 环境变量

![image-20220720110302867](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030303.png)

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030321.png"
  alt="image-20220720110321356"
  style="zoom:50%;"
/>

通过 _vi ~/.zshrc_ 来打开这个配置文件（没有会自动新建），然后按 _i_ 键进入 _insert_ 模式，粘贴上面的配置，然后按 _Esc_ 键退出编辑模式，之后 :wq 保存退出

![image-20220720110348986](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030349.png)

接下来就是让上面的配置生效，按照官网的步骤操作即可：

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030404.png"
  alt="image-20220720110404020"
  style="zoom:50%;"
/>

### 创建新项目

接下来我们通过 _npx react-native init 项目名_ 来创建新的项目

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030425.png"
  alt="image-20220720110425193"
  style="zoom:67%;"
/>

接下来我们需要准备预览环境，你可以准备真机，也可以用模拟器。

真机首先第一步需要开启 USB 调试，不同的机器开启方式不一样，例如小米手机可以参阅如下文档：

*https://jingyan.baidu.com/article/f71d60379ad6065bb641d1ac.html*

接下来进入【开发者选项】，打开如下的开关

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-062040.png"
  alt="image-20220720142040143"
  style="zoom:50%;"
/>

> 连接之前，要确保手机和电脑在同一个网络里面，否则无法连接上 _Metro_ 服务器

接下来执行 _npx react-native run-android_ 命令来启动整个项目

![image-20220720110448705](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030449.png)

此时会启动一个 _Metro_ 服务器，该服务器类似于 _webpack_ 中的 _webpack-dev-server_，能够实现代码热更新的效果。

![image-20220720110504925](https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030505.png)

## 目录分析

接下来我们来分析一下使用 _React Native CLI_ 所搭建的项目的目录结构。

<img
  src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2022-07-20-030525.png"
  alt="image-20220720110524782"
  style="zoom:50%;"
/>

_React Native_ 工程的目录和文件说明如下表：

| 目录文件     | 说明                           |
| ------------ | ------------------------------ |
| \_\_test\_\_ | React Native工程单元测试文件夹 |
| android      | 原生Android工程文件夹          |
| ios          | 原生iOS工程文件夹              |
| node_modules | React Native工程依赖的第三方库 |
| index.js     | React Native工程入口文件       |
| package.json | React Native工程配置文件       |

当然，在整个搭建项目的途中，我也踩了很多坑，并且这些坑根据你不同的操作系统，以及搭建的不同的目标环境会有所不同，这里有两篇汇总，记录如下：

*https://blog.csdn.net/weixin_40466351/article/details/125078877*

*https://blog.csdn.net/weixin_44058725/article/details/116146452*
