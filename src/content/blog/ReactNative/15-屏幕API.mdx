---
title: 屏幕API
description: 屏幕API
pubDate: 2025-10-10
toc: true
ogImage: true
category: React Native
---

这一小节我们来看一下 _RN_ 中和屏幕信息相关的 _API_，主要包括：

- _Dimensions_
- _PixelRatio_

## _Dimensions_

_Dimensions_ 这个 _API_ 在前面学习组件相关知识的时候，我们已经好几次见到过它了。这里我们来正式介绍该 _API_。

该 _API_ 主要用于获取设备屏幕的宽高，_Dimensions_ 的使用比较简单，只需要使用 _get_ 方法即可获取宽高信息，如下所示：

```js
const windowWidth = Dimensions.get('window').width
const windowHeight = Dimensions.get('window').height
```

```js
import React, { Component } from 'react'
import { View, StyleSheet, Text, Dimensions } from 'react-native'

const { width } = Dimensions.get('window')
const { height } = Dimensions.get('window')
const { scale } = Dimensions.get('window')

export default class NetInfoPage extends Component {
  render() {
    return (
      <View style={styles.container}>
        <Text style={styles.textStyle}>屏幕宽：{width}</Text>
        <Text style={styles.textStyle}>屏幕高：{height}</Text>
        <Text style={styles.textStyle}>Scale：{scale}</Text>
      </View>
    )
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#F5FCFF',
  },
  btnContainer: {
    marginTop: 100,
    marginLeft: 10,
    marginRight: 10,
    backgroundColor: '#EE7942',
    height: 38,
    borderRadius: 5,
    justifyContent: 'center',
    alignItems: 'center',
  },
  textStyle: {
    fontSize: 28,
  },
})
```

> 尽管尺寸立即可用，但它们可能会发生变化（例如，由于设备旋转、可折叠设备等），因此任何依赖于这些常量的渲染逻辑或样式都应尝试在每次渲染时调用此函数，而不是缓存值（例如，使用内联样式而不是在样式表中设置值）。

## _PixelRatio_

_PixelRatio_ 可以获取到设备的物理像素和 _CSS_ 像素的比例，也就是 _DPR_。

如果 _CSS_ 像素和设备像素 _1:1_ 关系，那么 _DPR_ 值就为 _1_。如果 _1_ 个 _CSS_ 像素对应 _2_ 个设备像素，那么 _DPR_ 值就为 _2_。

说简单点，就是一个 _CSS_ 像素要用多少个设备像素来显示。如果 _DPR_ 值为 _1_，表示用一个设备像素就够了，如果 _DPR_ 值为 _2_，则表示一个 _CSS_ 像素要用 _2_ 个设备像素来表示。

以 _iPhone4_ 为例，设备的物理像素为 _640_，为 _CSS_ 像素为 _320_，因此 _PixelRatio_ 值为 _2_。

在 _RN_ 中，通过 _PixelRatio.get( )_ 方法即可获取 _DPR_ 值。

```js
import React, { Component } from 'react'
import { View, StyleSheet, Text, PixelRatio } from 'react-native'

const dpr = PixelRatio.get()

export default class App extends Component {
  render() {
    return (
      <View style={styles.container}>
        <Text style={styles.textStyle}>DPR：{dpr}</Text>
      </View>
    )
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
    backgroundColor: '#F5FCFF',
  },
  textStyle: {
    fontSize: 28,
  },
})
```

常见的屏幕像素密度表如下：

| 设备像素密度 | 设备                                                       |
| ------------ | ---------------------------------------------------------- |
| 1            | iPhone2G/3G/3GS 以及 mdpi Android 设备                     |
| 1.5          | hdpi Android 设备                                          |
| 2            | iPhone4/5s/5/5c/5s/6/7/8 以及 xhdpi Android 设备           |
| 3            | iPhone6Plus/6sPlus/7Plus/X/XS/Max 以及 xxhdpi Android 设备 |
| 3.5          | Nexus6/PixelXL/2XL Android 设备                            |

我们通过前面的学习已经知道，在 RN 中所有尺寸都是没有单位的，例如：width: 100，这是因为 RN 中尺寸只有一个单位 dp，这是一种基于屏幕密度的抽象单位，默认省略。

在 RN 中，我们可以通过 PixelRatio 来将真实像素大小和 dp 单位进行一个转换

- static getPixelSizeForLayoutSize(layoutSize: number): number：获取一个布局元素的真实像素大小，返回值是一个四舍五入的整型
- static roundToNearestPixel(px: number): number：将真实像素大小转为 RN 的 dp 单位

```js
import { PixelRatio } from 'react-native'
const dp2px = (dp) => PixelRatio.getPixelSizeForLayoutSize(dp)
const px2dp = (px) => PixelRatio.roundToNearestPixel(px)

//按照下面的方式可实现px与dp之间的转换（比如100px*200px的View）
;<View
  style={{ width: px2dp(100), height: px2dp(200), backgroundColor: 'red' }}
/>
```
